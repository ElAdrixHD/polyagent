services:
  bot:
    build: .
    container_name: polyagent
    restart: unless-stopped
    env_file: .env
    volumes:
      - polyagent-data:/app/data
    stop_grace_period: 10s

  export:
    build: .
    container_name: polyagent-export
    env_file: .env
    volumes:
      - polyagent-data:/app/data
    command: python scripts/export_data.py
    profiles:
      - tools

  analyze:
    build: .
    container_name: polyagent-analyze
    env_file: .env
    volumes:
      - polyagent-data:/app/data
    command: python scripts/analyze.py
    profiles:
      - tools

  backtest:
    build: .
    container_name: polyagent-backtest
    env_file: .env
    volumes:
      - polyagent-data:/app/data
    command: python scripts/binary_option_backtest.py
    profiles:
      - tools

volumes:
  polyagent-data:
